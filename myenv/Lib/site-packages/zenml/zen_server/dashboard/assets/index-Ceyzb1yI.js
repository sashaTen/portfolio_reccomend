import{q as o}from"./@tanstack-DT5WLu9C.js";import{p as c,q as i,k as l,s as y,F as u}from"./index-CxO6541P.js";import{o as f}from"./url-BWJXzuI4.js";import{f as h}from"./stack-detail-query-DMJoxwgv.js";async function p(e){const n=c(i.stackDeployment.config)+(e?`?${f(e)}`:""),t=await l(n,{method:"GET",headers:{"Content-Type":"application/json"}});if(t.status===404&&y(),!t.ok){const a=await t.json().then(s=>Array.isArray(s.detail)?s.detail[1]:s.detail).catch(()=>"Error while fetching stack deployment config");throw new u({status:t.status,statusText:t.statusText,message:a})}return t.json()}async function k(e){const n=c(i.stackDeployment.info)+(e?`?${f(e)}`:""),t=await l(n,{method:"GET",headers:{"Content-Type":"application/json"}});if(t.status===404&&y(),!t.ok){const a=await t.json().then(s=>Array.isArray(s.detail)?s.detail[1]:s.detail).catch(()=>"Error while fetching stack deployment info");throw new u({status:t.status,statusText:t.statusText,message:a})}return t.json()}async function m(e){const n=c(i.stackDeployment.stack)+(e?`?${f(e)}`:""),t=await l(n,{method:"GET",headers:{"Content-Type":"application/json"}});if(t.status===404&&y(),!t.ok){const a=await t.json().then(s=>Array.isArray(s.detail)?s.detail[1]:s.detail).catch(()=>"Error while fetching the deployed stack");throw new u({status:t.status,statusText:t.statusText,message:a})}return t.json()}async function w(e){const n=c(i.stacks.all)+(e?`?${f(e)}`:""),t=await l(n,{method:"GET",headers:{"Content-Type":"application/json"}});if(t.status===404&&y(),!t.ok){const a=await t.json().then(s=>Array.isArray(s.detail)?s.detail[1]:s.detail).catch(()=>"Error while fetching stacks");throw new u({status:t.status,statusText:t.statusText,message:a})}return t.json()}const r={all:["stacks"],stackDeployment:["stack-deployment"],stackList:e=>o({queryKey:[...r.all,e],queryFn:async()=>w(e)}),stackDetail:e=>o({queryKey:[...r.all,e],queryFn:async()=>h({stackId:e})}),stackDeploymentInfo:e=>o({queryKey:[...r.stackDeployment,"info",e],queryFn:async()=>k(e)}),stackDeploymentStack:e=>o({queryKey:[...r.stackDeployment,"stack",e],queryFn:async()=>m(e)}),stackDeploymentConfig:e=>o({queryKey:[...r.stackDeployment,"config",e],queryFn:async()=>p(e)})};export{w as f,r as s};
